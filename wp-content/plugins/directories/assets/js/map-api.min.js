"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(p){function i(t,e){_classCallCheck(this,i),t instanceof jQuery?(this.container=t,this.containerSelector="#"+t.attr("id")):(this.container=p(t),this.containerSelector=t),this.container.find(this.containerSelector+"-view-term-entities").length&&(this.container=this.container.find(this.containerSelector+"-view-term-entities"),this.containerSelector=this.containerSelector+"-view-term-entities"),this.options=e,this.options.infobox=!(void 0!==this.options.infobox&&!this.options.infobox),this.options.infobox_event=this.options.infobox_event||"click",this.options.default_location=this.options.default_location||{lat:40.69847,lng:-73.95144},this.options.default_zoom=parseInt(this.options.default_zoom,10)||10,this.options.scrollwheel=this.options.scrollwheel||!1,this.options.fit_bounds_padding=this.options.fit_bounds_padding||0,this.markers=[],this.currentMarker=null,this.popover=null,this.$map=this.container.find(".drts-map-map").addClass("drts-popover-ignore-click").outerHeight(this.options.height)}DRTS.Map=DRTS.Map||{},DRTS.Map.api={settings:{},getMap:function(t,e){}},DRTS.Map.markerHeight=function(t){var e=t*Math.sqrt(2);return e-(e-t)/2},DRTS.Map.enableDirections=function(r){var a=r.getContainer().find(".drts-map-directions");a.length&&(a.find(".drts-map-directions-input").val(""),DRTS.Location&&DRTS.Location.api&&DRTS.Location.api.autocomplete(".drts-map-directions-input",function(){}),a.find(".drts-map-directions-trigger").on("click",function(t){var e,i,n,o=void 0;t.preventDefault(),""!==(e=a.find(".drts-map-directions-destination").val())&&(i=r.getMarker(e))&&((o=r.getMarkerLatlng(i))?(n="https://www.google.com/maps/dir/?api=1&origin="+encodeURIComponent(a.find(".drts-map-directions-input").val())+"&destination="+encodeURIComponent(o.join(","))+"&travelmode="+encodeURIComponent(p(this).data("travel-mode")||"driving"),window.open().location.href=n):console.log("Invalid destination"))}))},DRTS.Map.map=(_createClass(i,[{key:"getOptions",value:function(){return this.options}},{key:"getContainer",value:function(){return this.container}},{key:"getContainerSelector",value:function(){return this.containerSelector}},{key:"setMarkers",value:function(t){for(var e in t)this.addMarker(t[e]);return this}},{key:"clearMarkers",value:function(){return this.markers=[],this}},{key:"addMarker",value:function(t){}},{key:"getMarker",value:function(t){if(0!=t in this.markers)return this.markers[t]}},{key:"getMarkerLatlng",value:function(t){}},{key:"getMarkerContent",value:function(t){}},{key:"getMarkerPosition",value:function(t){}},{key:"getMarkerHeight",value:function(t){}},{key:"getMarkerEntityId",value:function(t){}},{key:"getMarkerKey",value:function(t){}},{key:"clickMarker",value:function(t,e){}},{key:"showMarkerContent",value:function(t,e){var i,n,o=this.getPopover(),r=void 0,a=void 0,s=void 0;return o&&o.sabaiPopover("hide"),!e&&this.options.infobox||this.animateMarker(t),e&&!this.options.trigger_infobox||!o?this:(r=this.getMarkerContent(t))?((n=this.getMarkerEntityId(t))&&(a=this.container.find('.drts-entity[data-entity-id="'+n+'"] .drts-map-marker-trigger[data-key="'+this.getMarkerKey(t)+'"]')).length&&(s=p(r)).find(".drts-map-marker-address").length&&(r=s.find(".drts-map-marker-address").text(a.text()).end().prop("outerHTML")),(i=this.getMarkerPosition(t))?(this.getPopover(i,this.getMarkerHeight(t)||38,r).sabaiPopover("show"),this):void 0):this}},{key:"animateMarker",value:function(t){}},{key:"draw",value:function(t){}},{key:"onResized",value:function(){}},{key:"getZoom",value:function(){}},{key:"getSouthWest",value:function(){}},{key:"getNorthEast",value:function(){}},{key:"getPopover",value:function(t,e,i){var n=this;if(this.options.infobox){if(!this.popover){var o=this.container.find("span.drts-map-popover");o.length||(o=p('<span style="position:absolute;" class="drts-map-popover"></span>').prependTo(this.container.find(".drts-map-container"))),DRTS.popover(o.removeClass("drts-popover-processed"),{html:!0,template:'<div class="'+DRTS.bsPrefix+"popover drts-map-popover "+DRTS.bsPrefix+'p-0" style="width:'+(this.options.infobox_width||240)+'px"><div class="'+DRTS.bsPrefix+'arrow"></div><div class="'+DRTS.bsPrefix+"close "+DRTS.bsPrefix+'p-1 drts-map-popover-close" aria-label="Close"><i aria-hidden="true" class="fas fa-times"></i></div><div class="'+DRTS.bsPrefix+"popover-body "+DRTS.bsPrefix+'p-0"></div></div>',placement:"top",container:this.container,sanitize:!1}),o.on("hidden.bs.popover",function(){n.currentMarker=null}),this.popover=o}if(t){var r=t.y;e&&(r-=e),this.popover.css({left:t.x+"px",top:r+"px"})}return i&&this.popover.attr("data-content",i),this.popover}}}]),i)}(jQuery);