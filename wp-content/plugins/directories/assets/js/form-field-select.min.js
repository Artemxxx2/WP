"use strict";!function(l){DRTS.Form.field.select=function(e,t){var a=l(e);if(a.length){var n=a.find(".select2").remove().end().find("select");if(n.length){t&&n.val(null);var s={escapeMarkup:function(e){return e},itemClass:a.data("select2-item-class")||"drts-form-select-item",itemIdKey:a.data("select2-item-id-key")||"id",itemTextKey:a.data("select2-item-text-key")||"title",itemImageKey:a.data("select2-item-image-key")||"image",minimumResultsForSearch:a.data("select2-search-min-results")||1/0};a.data("select2-lang")&&(s.language=a.data("select2-lang")),a.data("select2-ajax")&&(s.ajax={url:a.data("select2-ajax-url"),dataType:"json",delay:a.data("select2-ajax-delay")||250,data:function(e){return{query:e.term,page:e.page}},processResults:function(e,t){t.page=t.page||1;var a=[];return l.each(e,function(e,t){t.id=t[s.itemIdKey],t.text=t[s.itemTextKey],a.push(t)}),{results:a,pagination:{more:20*t.page<e.total}}}});var i=function(e,t){var a='<span class="'+s.itemClass+'">';return t&&(a+='<img src="'+t+'" alt="'+e+'" /> '),a+=e+"</span>"};s.templateResult=function(e){return s.itemTextKey in e&&e[s.itemTextKey]?i(e[s.itemTextKey],e[s.itemImageKey]):e.text},s.templateSelection=function(e){return e.id&&e.element?i(e.text,e.element.getAttribute("data-image")):e.text},s.dropdownParent=n.closest(".drts-form-field"),n.select2(s),a.on("change.select2",function(e){l(e.target).attr("name")||e.stopPropagation()}),n.data("select2").on("results:message",function(){this.dropdown._resizeDropdown(),this.dropdown._positionDropdown()}),a.on("entity_reset_form_field.sabai",function(){l(this).find("select").val(null)})}}},l(DRTS).on("clonefield.sabai",function(e,t){t.clone.hasClass("drts-form-select2")&&DRTS.Form.field.select(t.clone,!0)})}(jQuery);