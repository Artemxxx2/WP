"use strict";!function(d){DRTS.WordPress=DRTS.WordPress||{},DRTS.WordPress.mediamanager=DRTS.WordPress.mediamanager||function(e){var a=d.extend({},{selector:"",maxNumFiles:0,maxNumFileExceededError:"",fileNotAllowedError:"",sortable:!0,sortableHandle:!1,deleteConfirm:"Are you sure?"},e),t=d(a.selector);if(t.length){var l={},o=t.closest(".drts-form-type-wp-media-manager").find(".drts-wp-upload-current table");t.on("click",function(e){e.preventDefault();var s,t=d(this),n=t.data("input-name");l[n]||(s=t.data("mime-types").split(","),l[n]=wp.media({frame:"post",multiple:!0,library:{type:s}}),l[n].on("insert",function(e){var t,r,i;l[n].state().get("selection").each(function(e){if(t=e.toJSON(),-1===d.inArray(t.mime,s))return alert(a.fileNotAllowedError),!1;i=void 0!==t.sizes?void 0!==t.sizes.thumbnail?t.sizes.thumbnail.url:t.sizes.full.url:t.icon,r='<tr class="drts-wp-file-row"><td><img src="'+i+'" alt="'+t.title+'" /></td><td>'+t.title+"</td><td>"+t.filesizeHumanReadable+'</td><td><input name="'+n+"[current]["+t.id+'][check][]" type="hidden" value="'+t.id+'" /><a href="#" class="drts-wp-file-row-delete '+DRTS.bsPrefix+"btn "+DRTS.bsPrefix+"btn-sm "+DRTS.bsPrefix+'btn-danger"><i class="fas fa-times"></i></a></tr></tr>',o.has(".drts-wp-file-row").length||o.find("tbody").empty(),d(r).appendTo(o.find("tbody"))})})),l[n].open()}),o.on("click",".drts-wp-file-row-delete",function(){if(!confirm(a.deleteConfirm))return!1;var e=d(this).closest(".drts-wp-file-row");return e.fadeTo("fast",0,function(){e.slideUp("fast",function(){e.remove()})}),!1}),t.closest("form").submit(function(){if(a.maxNumFiles&&o.find('input[type="checkbox"]:checked').length>a.maxNumFiles)return a.maxNumFileExceededError&&alert(a.maxNumFileExceededError),d(this).find("button[type=submit]").prop("disabled",!1),!1}),a.sortable&&o.find("tbody").sortable({containment:"parent",axis:"y",handle:a.sortableHandle,cursor:"move"})}}}(jQuery);