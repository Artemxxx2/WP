"use strict";!function(t){DRTS.Location.api.autocomplete=function(o,n){var e=t(o);if(e.length){var a=DRTS.Location.api._getAutocompleteOptions();e.each(function(o,t){t.addEventListener("focus",function(o){var e=new google.maps.places.Autocomplete(t,a);e.addListener("place_changed",function(){var o=e.getPlace();console.log("GoogleMaps autocomplete results:",o),n(DRTS.Location.googlemaps.parsePlace(o))})}),t.addEventListener("keydown",function(o){13===o.keyCode&&o.preventDefault()})})}},DRTS.Location.api.getSuggestions=function(o,p){(new google.maps.places.AutocompleteService).getPlacePredictions(DRTS.Location.api._getAutocompleteOptions(o),function(o,e){if(e===google.maps.places.PlacesServiceStatus.OK){console.log("GoogleMaps place predictions:",o);var t=[],n=!0,a=!1,c=void 0;try{for(var i,l=o[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var s=i.value;t.push({text:s.description,placeId:s.place_id})}}catch(o){a=!0,c=o}finally{try{!n&&l.return&&l.return()}finally{if(a)throw c}}p(t)}})},DRTS.Location.api.geocodeSuggestion=function(c,i,l){new google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:c.placeId,sessionToken:DRTS.Location.api._autocompleteSessionToken},function(o,e){if(e===google.maps.places.PlacesServiceStatus.OK){console.log("GoogleMaps place details:",o,o.geometry.viewport.toString());var t=o.geometry.location,n=o.geometry.viewport;i([t.lat(),t.lng()],[n.getSouthWest().lat(),n.getSouthWest().lng(),n.getNorthEast().lat(),n.getNorthEast().lng()]),DRTS.Location.api._autocompleteSessionToken=null}else{var a=new Error("Geocoding place (ID: "+c.placeId+") failed due to: "+e);if(!l)throw a;l(a)}})},DRTS.Location.api._getAutocompleteOptions=function(o){DRTS.Location.api._autocompleteSessionToken||(DRTS.Location.api._autocompleteSessionToken=new google.maps.places.AutocompleteSessionToken);var e={sessionToken:DRTS.Location.api._autocompleteSessionToken,componentRestrictions:{country:[]}};return DRTS_Location_googlemapsAutocomplete.type&&(e.types=[DRTS_Location_googlemapsAutocomplete.type]),DRTS_Location_googlemapsAutocomplete.country&&DRTS_Location_googlemapsAutocomplete.country instanceof Array&&(e.componentRestrictions.country=DRTS_Location_googlemapsAutocomplete.country),void 0!==o&&(e.input=o),e}}(jQuery);